<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>rps</title>
</head>

<body>

    <h1>Rock Paper Scissors</h1>

    <button class="button" onclick="displayTutorial()">Click for Tutorial</button>

    <div id="tutorial">
        Rock: wins against scissors, loses to paper, and ties against itself.
        <br>Paper: wins against rock, loses to scissors, and ties against itself.
        <br>Scissors: wins against paper, loses to rock, and ties against itself.
        <br>To start the game press o.
        <br>To play Rock, press r
        <br>To play Paper, press p
        <br>To play Scissors, press s
        <br>You will be fighting an AI.
    </div>

    <div id = "game">
        Lets begin the game!!!
        <br>Enter your choice of rock, paper, or scissors.
    </div>

    <div id = "outcome">
        You got a draw!
    </div>

    <h2>You typed <span id="user-text"><strong>...Nothing.</strong></span></h2>

    <script>
        function displayTutorial() {
            var x = document.getElementById("tutorial");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        var computer = ["r", "p", "s"];
        var computerChoice = computer[Math.floor(Math.random()*3)];
        console.log(computerChoice);

        var input = document.getElementById("user-text");
        var choice;
        var counter = false;
        var b;

        document.onkeyup = function (event) {
            var x = document.getElementById("game");
            input.textContent = event.key;
            choice = event.key;
            if (choice.toLowerCase() == "o") {
                x.style.visibility = "visible";
                console.log(computerChoice);
            }

            for(var i = 0; counter != true; i++){
                gamePlay();
                if(b){
                    break;
                }
            }
        };

        function gamePlay(){
            var outcome = document.getElementById("outcome");
            if (document.getElementById("game").style.visibility == "visible") {
                if (choice == computerChoice) {
                    outcome.style.visibility = "visible";
                }
                else if ((choice == "p" && computerChoice == "r") || (choice == "s" && computerChoice == "p") || (choice == "r" && computerChoice == "s")) {
                    outcome.textContent = "You won!";
                    outcome.style.visibility = "visible";
                }
                else if ((choice == "r" && computerChoice == "p") || (choice == "p" && computerChoice == "s") || (choice == "s" && computerChoice == "r")) {
                    outcome.textContent = "You lost ;(";
                    outcome.style.visibility = "visible";
                }
            }
            if(outcome.style.visibility == "visible"){
                counter = confirm("Play Again?")
            }
            if(!counter){
                b = true;
            }
        }
        
    </script>

</body>

</html>